/*! 
  Project  Name: JobBest 
  Last Modified: 2015-01-15
*/
avalon.log("加载avalon完毕，开始构建根VM与加载其他模块"),require(["ready!","mmState"],function(){avalon.templateCache.loading="loading<span class='loading-with-dot'></span>";{var root=avalon.define({$id:"root",header:"modules/header/header.html",nav:"modules/nav/nav.html",aside:"modules/aside/aside.html",footer:"modules/footer/footer.html",async_banner_advs:"loading",loading_show:!0,hideLoading:function(){root.loading_show=!1},error_show:!1,show_error:function(){root.error_show=!0},search_show:!1,toggleSearch:function(e){e.preventDefault(),root.search_show=!root.search_show},userInfo:{},login:!1,userData:{},initIndexFn:function(){$.get("data/index.json",function(data){root.userData=data.data,avalon.log("init index done")}),avalon.log("initIndexFn triggered")},error:function(){console.log("error!")}});avalon.define({$id:"resume",seeker:{}})}avalon.state("index",{controller:"root",url:"/",views:{"":{templateUrl:"./modules/index/index.html"},"title@":{template:"&nbsp"}},onChange:function(){avalon.log("initIndex when index state in"),root.initIndexFn()}}),avalon.state("user",{controller:"root",url:"/user",views:{"":{templateUrl:"./modules/user/user.html"},"title@":{template:"个人空间"}}}),avalon.state("resume",{controller:"root","abstract":!0,url:"/resume",templateUrl:"./modules/resume/resume.html",onChange:function(){avalon.log("change to resume state")}}),avalon.state("resume.detail",{controller:"resume",url:"/{resumeuid}",onChange:function(){avalon.log("init resume detail when resume detail state in");{var vmodel=avalon.vmodels.resume;$.get("data/resume.json",function(data,res){res?(vmodel.seeker=data.data,avalon.vmodels.root.loading_show=!1,avalon.log("init resume detail done")):avalon.log("no resume uid data")})}},views:{"":{templateUrl:"./modules/resume/resume.detail.html"},"title@":{template:"个人简历"}}}),require(["../../modules/async/advs/advs"],function(){avalon.log("加载异步广告模块完毕")}),avalon.history.start({basepath:"/"}),avalon.scan()});